---
import Layout from "../layouts/Layout.astro";

// --- YOUR VIDEOS ---
const videos = [
  {
    videoId: "Nlt6M7iIpbk", // Example: Indiahikes Kedarkantha
    title: "Kedarkantha Trek Story",
    description: "A short film capturing the essence of the Kedarkantha trek."
  },
  {
    videoId: "mCt_TxJVFNs", // Example: Indiahikes Buran Ghati
    title: "Buran Ghati Trek",
    description: "Experiencing the dramatic pass crossing in the Himalayas."
  },
  {
    videoId: "O5oEgv84-3k", // Example: Travel Video
    title: "Visions of Goa",
    description: "A cinematic look at the sights and sounds of Goa."
  },
  {
    videoId: "m-j8gD0-xJk", // Example: F1 Short
    title: "Monaco GP Highlights",
    description: "Action and drama from the iconic street circuit."
  },
];
---

<Layout title="Eric Alex | Videos">
  <main class="video-page">
    <div class="page-header">
      <p class="section-label">Creatives</p>
      <h1 class="page-title">Videography</h1>
    </div>

    <div class="video-grid">
      {videos.map(video => (
        <div class="video-card">
          <div class="lite-video" data-videoid={video.videoId}>
            <img 
              src={`https://i.ytimg.com/vi/${video.videoId}/hqdefault.jpg`} 
              alt={video.title} 
              class="video-thumbnail"
              loading="lazy"
            />
            <div class="play-button">
              <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3" fill="white"></polygon>
              </svg>
            </div>
          </div>
          <h3 class="video-title">{video.title}</h3>
          <p class="video-description">{video.description}</p>
        </div>
      ))}
    </div>
  </main>
</Layout>

<style>
  .video-page {
    width: 95%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 0;
  }

  .page-header {
    text-align: center;
    padding: 2rem 0 4rem 0;
  }

  .section-label {
    font-size: 0.9rem;
    color: var(--light-text-color);
    text-transform: capitalize;
    letter-spacing: 0.05em;
    margin: 0;
  }

  .page-title {
    font-size: 3.5rem;
    font-weight: 500;
    color: var(--text-color);
    margin: 0.5rem 0 0 0;
  }

  /* ================================== */
  /* VIDEO GRID                         */
  /* ================================== */
  .video-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
  }

  .video-card {
    background-color: #222;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    overflow: hidden;
  }

  .video-title {
    font-size: 1.2rem;
    font-weight: 500;
    color: var(--text-color);
    margin: 0;
    padding: 1rem 1.2rem 0.5rem 1.2rem;
  }

  .video-description {
    font-size: 0.9rem;
    color: var(--light-text-color);
    line-height: 1.6;
    margin: 0;
    padding: 0 1.2rem 1.2rem 1.2rem;
  }

  /* ================================== */
  /* LITE VIDEO EMBED (FIXED)           */
  /* ================================== */
  .lite-video {
    position: relative;
    cursor: pointer;
    line-height: 0;
    aspect-ratio: 16 / 9; 
    overflow: hidden; 
  }

  .video-thumbnail {
    width: 100%;
    height: 100%; 
    object-fit: cover;
    border-bottom: 1px solid var(--border-color);
    transition: filter 0.3s ease;
  }
  
  .lite-video:hover .video-thumbnail {
    filter: brightness(0.8);
  }

  .play-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    background-color: rgba(0, 0, 0, 0.4);
    border-radius: 50%;
    width: 70px;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
    transition: background-color 0.3s ease;
  }
  
  .lite-video:hover .play-button {
    background-color: rgba(0, 0, 0, 0.7);
  }

  .play-button svg {
    width: 32px;
    height: 32px;
    margin-left: 4px; /* Optically center the play icon */
  }

  /* This style is still good to have as a fallback,
    but we will also set it in the JS.
  */
  .lite-video iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }


  /* ================================== */
  /* MOBILE STYLES                      */
  /* ================================== */
  @media (max-width: 768px) {
    .video-grid {
      grid-template-columns: 1fr; /* 1 column on mobile */
      gap: 2rem;
    }
    
    .page-title {
      font-size: 2.8rem;
    }
    
    .page-header {
      padding: 1rem 0 3rem 0;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const allVideos = document.querySelectorAll('.lite-video');

    allVideos.forEach(video => {
      video.addEventListener('click', () => {
        const videoId = video.dataset.videoid;
        const iframe = document.createElement('iframe');
        
        iframe.setAttribute('src', `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`);
        iframe.setAttribute('frameborder', '0');
        iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
        iframe.setAttribute('allowfullscreen', 'true');
        
        // --- THIS IS THE FIX ---
        // We add the styles directly to the iframe
        // to ensure it fills the 16:9 container.
        iframe.style.position = 'absolute';
        iframe.style.top = '0';
        iframe.style.left = '0';
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        iframe.style.border = 'none';
        // --- END OF FIX ---
        
        video.innerHTML = '';
        video.appendChild(iframe);
      });
    });
  });
</script>